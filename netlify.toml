[build]
  publish = "dist"
  command = "npm run build"

[build.environment]
  NETLIFY = "true"

# Admin routes - serve admin files directly
[[redirects]]
  from = "/admin/"
  to = "/admin/index.html"
  status = 200

[[redirects]]
  from = "/admin/*"
  to = "/admin/index.html"
  status = 200

# SPA redirect rule for main app (but exclude admin)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Enable Netlify Identity for CMS
[template]
  incoming-hooks = ["netlify-identity-signup"]