[build]
  publish = "dist"
  command = "npm install --legacy-peer-deps && npm run build"

[build.environment]
  NETLIFY = "true"
  VITE_FLUTTERWAVE_PUBLIC_KEY = "FLWPUBK_TEST-f18b5612cfa1fcbce67bbbe6f0c27a74-X"

# Admin routes - serve admin files directly
[[redirects]]
  from = "/admin/"
  to = "/admin/index.html"
  status = 200

[[redirects]]
  from = "/admin/*"
  to = "/admin/index.html"
  status = 200

# SPA redirect rule for main app (but exclude admin)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Enable Netlify Identity for CMS
[template]
  incoming-hooks = ["netlify-identity-signup"]